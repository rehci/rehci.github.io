# Project Structure Documentation

This document provides a comprehensive overview of the project's folder structure and file organization, explaining the role and purpose of each directory and file.

## Table of Contents

- [Root Directory](#root-directory)
- [App Directory (`app/`)](#app-directory-app)
- [Components Directory (`components/`)](#components-directory-components)
- [Library Directory (`lib/`)](#library-directory-lib)
- [Content Directory (`content/`)](#content-directory-content)
- [Public Directory (`public/`)](#public-directory-public)
- [Scripts Directory (`scripts/`)](#scripts-directory-scripts)
- [Build Output (`out/`)](#build-output-out)
- [Configuration Files](#configuration-files)
- [Documentation Files](#documentation-files)

---

## Root Directory

The root directory contains configuration files, documentation, and the main project structure.

### Configuration Files

#### `package.json`
**Purpose**: Node.js package configuration file.

**Role**:
- Defines project metadata (name, version)
- Lists all dependencies (production and development)
- Contains npm scripts for development, building, and deployment
- Scripts include: `dev`, `build`, `start`, `lint`, `init-search`, `generate-articles-json`, `build-and-test`

**Key Scripts**:
- `npm run dev` - Start development server
- `npm run build` - Build for production (generates articles.json first)
- `npm run init-search` - Initialize Meilisearch index
- `npm run generate-articles-json` - Generate client-side articles JSON

---

#### `package-lock.json` & `pnpm-lock.yaml`
**Purpose**: Lock files for dependency versions.

**Role**:
- `package-lock.json` - Used by npm to lock exact dependency versions
- `pnpm-lock.yaml` - Used by pnpm to lock exact dependency versions
- Ensures consistent dependency versions across installations
- Automatically generated, should be committed to version control

---

#### `tsconfig.json`
**Purpose**: TypeScript compiler configuration.

**Role**:
- Configures TypeScript compilation settings
- Sets target ES version (ES2017)
- Configures module resolution (bundler mode for Next.js)
- Sets up path aliases (`@/*` maps to project root)
- Includes/excludes files for compilation
- Enables strict type checking

**Key Settings**:
- Path alias: `@/*` → `./*` (allows imports like `@/lib/markdown`)
- JSX mode: `react-jsx`
- Module: `esnext` with `bundler` resolution

---

#### `next.config.ts`
**Purpose**: Next.js framework configuration.

**Role**:
- Configures Next.js build and runtime behavior
- Sets static export mode (`output: 'export'`)
- Configures base path for GitHub Pages deployment
- Configures image optimization (disabled for static export)
- Sets trailing slash for better GitHub Pages compatibility

**Key Features**:
- Static site generation (SSG) only
- Automatic basePath detection for GitHub Pages
- Unoptimized images (required for static export)
- Trailing slash enabled

---

#### `next-env.d.ts`
**Purpose**: TypeScript type definitions for Next.js.

**Role**:
- Auto-generated by Next.js
- Provides TypeScript types for Next.js APIs
- Should not be manually edited
- Included in `tsconfig.json`

---

#### `postcss.config.mjs`
**Purpose**: PostCSS configuration for CSS processing.

**Role**:
- Configures PostCSS plugins
- Integrates Tailwind CSS v4 PostCSS plugin
- Processes CSS during build (Tailwind directives, etc.)

**Configuration**:
- Uses `@tailwindcss/postcss` plugin

---

#### `eslint.config.mjs`
**Purpose**: ESLint configuration for code linting.

**Role**:
- Configures ESLint rules and plugins
- Extends Next.js ESLint configs (core-web-vitals, TypeScript)
- Sets up global ignores (`.next/`, `out/`, `build/`)
- Ensures code quality and consistency

**Configuration**:
- Uses `eslint-config-next` for Next.js-specific rules
- Ignores build output directories

---

### Documentation Files

#### `README.md`
**Purpose**: Main project documentation and getting started guide.

**Role**:
- Project overview and features
- Installation instructions
- Quick start guide
- Usage examples
- First point of reference for new developers

---

#### `SETUP.md`
**Purpose**: Detailed setup instructions.

**Role**:
- Step-by-step setup guide
- Meilisearch installation options (Docker, Cloud, Local)
- Environment variable configuration
- Search index initialization
- Development server setup

---

#### `DEPLOYMENT.md`
**Purpose**: Deployment guide and instructions.

**Role**:
- Deployment options (Vercel, Netlify, GitHub Pages, etc.)
- Static site generation configuration
- Environment setup for production
- Build and deployment steps

---

#### `DEPENDENCIES.md`
**Purpose**: Comprehensive documentation of all project dependencies.

**Role**:
- Lists all dependencies with versions
- Explains purpose and usage of each package
- Shows code examples
- Documents dependency relationships

---

#### `PROJECT_STRUCTURE.md` (this file)
**Purpose**: Documentation of project folder and file structure.

**Role**:
- Explains organization of all directories and files
- Documents the role of each component
- Helps developers navigate the codebase

---

### Build Output

#### `node_modules/`
**Purpose**: Directory containing all installed npm packages.

**Role**:
- Stores all project dependencies
- Auto-generated by `npm install`
- Should not be committed to version control
- Listed in `.gitignore`

---

#### `out/`
**Purpose**: Static build output directory.

**Role**:
- Contains the static HTML/CSS/JS files generated by `next build`
- Ready for deployment to static hosting
- Includes all pre-rendered pages, assets, and manifests
- Structure mirrors the `app/` directory structure

**Note**: This directory is generated during build and should not be manually edited.

---

## App Directory (`app/`)

The `app/` directory follows Next.js 13+ App Router conventions. It contains all routes, pages, layouts, and API endpoints.

### Root Layout

#### `app/layout.tsx`
**Purpose**: Root layout component for the entire application.

**Role**:
- Defines the HTML structure (`<html>`, `<body>`)
- Loads Google Fonts (Geist Sans, Geist Mono)
- Imports global CSS styles
- Renders Navigation component with categories
- Includes footer with copyright
- Sets up dark mode support
- Defines global metadata (SEO, Open Graph, Twitter cards)

**Key Features**:
- Server component (fetches categories server-side)
- Provides consistent layout across all pages
- SEO metadata configuration

---

#### `app/globals.css`
**Purpose**: Global CSS styles and Tailwind CSS imports.

**Role**:
- Imports Tailwind CSS (`@import "tailwindcss"`)
- Defines CSS custom properties (CSS variables)
- Sets up theme variables for colors and fonts
- Configures dark mode color scheme
- Base styles for the application

**Key Features**:
- Tailwind CSS v4 import syntax
- Dark mode support via `prefers-color-scheme`
- Custom theme variables

---

#### `app/favicon.ico`
**Purpose**: Website favicon.

**Role**:
- Browser tab icon
- Displayed in bookmarks and browser tabs
- Next.js automatically serves this file

---

### Pages

#### `app/page.tsx`
**Purpose**: Home page component.

**Role**:
- Landing page of the encyclopedia
- Displays hero section with search bar
- Shows category grid for browsing
- Lists featured articles (first 6)
- Lists recent articles (sorted by date, first 6)
- Handles empty state when no articles exist

**Key Features**:
- Server component (fetches articles server-side)
- Responsive grid layouts
- Search bar integration
- Category navigation links

---

#### `app/article/[slug]/page.tsx`
**Purpose**: Dynamic article detail page.

**Role**:
- Displays individual article content
- Generates static paths for all articles at build time
- Generates dynamic metadata for SEO
- Shows article header (title, description, date, author)
- Renders article content with ArticleContent component
- Displays breadcrumb navigation
- Shows category badge and tags
- Handles 404 for non-existent articles

**Key Features**:
- Static Site Generation (SSG) with `generateStaticParams()`
- Dynamic metadata generation
- Breadcrumb navigation
- Featured image support
- Tag links to search

**Route**: `/article/[slug]` (e.g., `/article/getting-started`)

---

#### `app/category/[category]/page.tsx`
**Purpose**: Category listing page.

**Role**:
- Displays all articles in a specific category
- Generates static paths for all categories at build time
- Shows category name and article count
- Lists articles using ArticleCard components
- Handles 404 for non-existent categories

**Key Features**:
- Static Site Generation (SSG)
- Dynamic routing with category parameter
- Article filtering by category

**Route**: `/category/[category]` (e.g., `/category/Technology`)

---

#### `app/search/page.tsx`
**Purpose**: Search results page.

**Role**:
- Displays search results based on query parameter
- Shows search bar at the top
- Lists matching articles
- Handles empty search state
- Supports client-side search for static sites

**Key Features**:
- Client component (uses search functionality)
- Query parameter handling (`?q=query`)
- Search result display
- Fallback to client-side search

**Route**: `/search?q=query`

---

### API Routes

#### `app/api/search/route.ts`
**Purpose**: Search API endpoint.

**Role**:
- Handles GET requests for article search
- Accepts query parameters: `q` (query), `category`, `tags`
- Returns JSON with search results
- Uses Meilisearch for server-side search
- Returns empty results for static export (uses client-side search instead)

**Key Features**:
- RESTful API endpoint
- Query parameter parsing
- Meilisearch integration
- Static export compatibility

**Route**: `/api/search?q=query&category=Technology`

---

### SEO & Metadata

#### `app/robots.ts`
**Purpose**: Generates robots.txt file.

**Role**:
- Tells search engines which pages to crawl
- Configures sitemap location
- Can block specific paths from indexing
- Automatically served at `/robots.txt`

**Key Features**:
- Dynamic generation
- Sitemap reference
- Crawl rules configuration

---

#### `app/sitemap.ts`
**Purpose**: Generates XML sitemap.

**Role**:
- Creates sitemap.xml for search engines
- Lists all article pages
- Lists all category pages
- Includes last modified dates
- Helps with SEO and search engine indexing

**Key Features**:
- Dynamic generation from articles
- Includes all routes
- SEO optimization

---

## Components Directory (`components/`)

Reusable React components used throughout the application.

### `components/ArticleCard.tsx`
**Purpose**: Card component for displaying article previews.

**Role**:
- Displays article thumbnail, title, description
- Shows category badge and tags
- Links to article detail page
- Used in article listings (home, category, search pages)
- Responsive design with hover effects

**Props**:
- `article`: Article object with slug, title, description, category, tags, image, date

**Usage**:
- Home page featured/recent articles
- Category page article listings
- Search results page

---

### `components/ArticleContent.tsx`
**Purpose**: Component for rendering Markdown content.

**Role**:
- Renders Markdown content as formatted HTML
- Uses `react-markdown` for parsing
- Supports GitHub Flavored Markdown (tables, strikethrough, etc.)
- Custom rendering for images (Next.js Image component)
- Custom styling for links and code blocks
- Prose styling with Tailwind Typography

**Props**:
- `content`: Raw Markdown string

**Usage**:
- Article detail pages (`app/article/[slug]/page.tsx`)

**Key Features**:
- Image optimization with Next.js Image
- Syntax highlighting for code blocks
- Custom link styling
- Dark mode support

---

### `components/Navigation.tsx`
**Purpose**: Main navigation bar component.

**Role**:
- Sticky navigation header
- Displays site logo/brand
- Shows navigation links (Home, Search, Categories)
- Responsive mobile menu
- Highlights active page
- Dark mode support

**Props**:
- `categories`: Array of category names

**Usage**:
- Included in root layout (`app/layout.tsx`)

**Key Features**:
- Client component (uses `usePathname` hook)
- Mobile-responsive hamburger menu
- Active link highlighting
- Smooth transitions

---

### `components/SearchBar.tsx`
**Purpose**: Interactive search bar with autocomplete.

**Role**:
- Search input with autocomplete dropdown
- Debounced search (300ms delay)
- Client-side search using articles.json
- Displays search results in dropdown
- Navigates to search page on submit
- Shows loading state while searching

**Props**:
- `onSearch?`: Optional callback function
- `placeholder?`: Optional placeholder text

**Usage**:
- Home page hero section
- Can be used anywhere search is needed

**Key Features**:
- Client component (uses React hooks)
- Debounced search for performance
- Keyboard navigation support
- Loading indicators
- Empty state handling

---

## Library Directory (`lib/`)

Utility functions and shared business logic.

### `lib/markdown.ts`
**Purpose**: Markdown file processing and article management.

**Role**:
- Reads Markdown files from `content/` directory
- Parses frontmatter using `gray-matter`
- Processes Markdown to HTML (server-side)
- Provides functions to get articles, categories, slugs
- Filters articles by category
- Sanitizes HTML output

**Key Functions**:
- `getAllArticles()`: Returns all articles from content directory
- `getArticleBySlug(slug)`: Gets a single article by slug
- `getAllSlugs()`: Returns all article slugs (for static generation)
- `getArticlesByCategory(category)`: Filters articles by category
- `getAllCategories()`: Returns unique categories
- `processMarkdown(content)`: Converts Markdown to sanitized HTML

**Usage**:
- Used by pages to fetch article data
- Used by scripts to generate articles.json
- Used by search functionality

---

### `lib/search.ts`
**Purpose**: Server-side search functionality using Meilisearch.

**Role**:
- Initializes Meilisearch client
- Creates and configures search index
- Indexes articles for search
- Performs full-text search with filters
- Falls back to simple search if Meilisearch unavailable

**Key Functions**:
- `initializeSearchIndex()`: Creates index and indexes all articles
- `searchArticles(query, filters?)`: Performs search with optional filters

**Usage**:
- Search API route (`app/api/search/route.ts`)
- Search initialization script (`scripts/init-search.ts`)

**Key Features**:
- Typo-tolerant search
- Filtering by category and tags
- Sortable results
- Fallback search implementation

---

### `lib/client-search.ts`
**Purpose**: Client-side search for static sites.

**Role**:
- Performs search entirely in the browser
- No server or API required
- Used when Meilisearch is not available (static deployments)
- Searches through articles.json file

**Key Functions**:
- `clientSearch(articles, query, filters?)`: Performs client-side search

**Usage**:
- SearchBar component (`components/SearchBar.tsx`)
- Search page (`app/search/page.tsx`)

**Key Features**:
- Relevance scoring
- Category and tag filtering
- No external dependencies
- Works offline

---

## Content Directory (`content/`)

Source content for articles.

### `content/*.md`
**Purpose**: Markdown files containing article content.

**Role**:
- Each `.md` file represents one article
- Contains YAML frontmatter with metadata
- Contains Markdown content for the article body
- Files are automatically discovered and processed

**Frontmatter Fields**:
- `title`: Article title
- `description`: Brief description
- `category`: Category name
- `tags`: Array of tags
- `date`: Publication date (YYYY-MM-DD)
- `author`: Author name
- `image`: Featured image path

**Example Files**:
- `getting-started.md`
- `artificial-intelligence.md`
- `quantum-computing.md`

**Usage**:
- Read by `lib/markdown.ts`
- Processed during build
- Indexed by Meilisearch

---

## Public Directory (`public/`)

Static assets served directly by Next.js.

### `public/articles.json`
**Purpose**: Client-side articles data file.

**Role**:
- Contains simplified article data for client-side use
- Generated by `scripts/generate-articles-json.ts`
- Used by SearchBar and search page for client-side search
- Includes article metadata but not full content (size optimization)

**Structure**:
- Array of article objects
- Each article has: slug, title, description, category, tags, date, author, image, contentPreview

**Usage**:
- Loaded by SearchBar component
- Used for client-side search functionality
- Accessible at `/articles.json`

---

### `public/images/`
**Purpose**: Directory for article images.

**Role**:
- Stores images used in articles
- Referenced in article frontmatter or Markdown content
- Served as static assets
- Can include README.md with usage instructions

---

### `public/*.svg`
**Purpose**: SVG icon files.

**Role**:
- Static SVG assets
- Example files: `next.svg`, `vercel.svg`, `file.svg`, `globe.svg`, `window.svg`
- Can be used in components or referenced in articles

---

## Scripts Directory (`scripts/`)

Build and utility scripts run with `tsx`.

### `scripts/init-search.ts`
**Purpose**: Initializes Meilisearch search index.

**Role**:
- Creates Meilisearch index if it doesn't exist
- Configures searchable, filterable, and sortable attributes
- Indexes all articles from `content/` directory
- Run with `npm run init-search`

**Usage**:
- Initial setup after installing dependencies
- After adding new articles
- When search index needs to be rebuilt

---

### `scripts/generate-articles-json.ts`
**Purpose**: Generates articles.json for client-side use.

**Role**:
- Reads all articles from `content/` directory
- Creates simplified version (excludes full content)
- Writes to `public/articles.json`
- Run automatically during build (`npm run build`)
- Can be run manually with `npm run generate-articles-json`

**Usage**:
- Part of build process
- Required for client-side search functionality

---

### `scripts/build-and-test-static.ts`
**Purpose**: Build and test script for static site generation.

**Role**:
- Builds the Next.js static site
- Tests the build output
- Validates static generation
- Run with `npm run build-and-test`

**Usage**:
- Testing static export before deployment
- CI/CD pipeline validation

---

## Build Output (`out/`)

Generated static files (created during `npm run build`).

### Structure

The `out/` directory mirrors the `app/` directory structure:

- `index.html` - Home page
- `article/[slug]/index.html` - Article pages
- `category/[category]/index.html` - Category pages
- `search/index.html` - Search page
- `api/search` - API route (empty for static export)
- `_next/` - Next.js build artifacts (JS, CSS, manifests)
- `articles.json` - Client-side articles data
- `sitemap.xml` - Generated sitemap
- `robots.txt` - Generated robots file
- Static assets (images, SVGs, etc.)

**Note**: This directory is generated and should not be manually edited. It's ready for deployment to any static hosting service.

---

## File Type Summary

### TypeScript/React Files
- `.tsx` - React components and pages
- `.ts` - TypeScript utility files and scripts
- `.mjs` - JavaScript module files (config files)

### Configuration Files
- `.json` - Package and TypeScript configs
- `.mjs` - PostCSS and ESLint configs
- `.ts` - Next.js config

### Content Files
- `.md` - Markdown article files
- `.json` - Data files (articles.json)

### Static Assets
- `.css` - Stylesheets
- `.svg` - Vector graphics
- `.ico` - Icons
- `.png`, `.jpg`, etc. - Images

---

## Directory Relationships

```
Root
├── app/                    # Next.js App Router (routes, pages, API)
│   ├── Uses components/   # Imports React components
│   └── Uses lib/          # Imports utility functions
│
├── components/            # Reusable React components
│   └── Uses lib/         # Imports utility functions
│
├── lib/                   # Business logic and utilities
│   ├── Reads content/    # Processes Markdown files
│   └── Uses public/      # References static assets
│
├── content/               # Source Markdown articles
│   └── Processed by lib/ # Read by markdown.ts
│
├── public/                # Static assets
│   └── Served by Next.js # Directly accessible via URL
│
├── scripts/               # Build and utility scripts
│   ├── Uses lib/         # Imports utility functions
│   └── Reads content/   # Processes Markdown files
│
└── out/                   # Build output (generated)
    └── Static HTML/CSS/JS # Ready for deployment
```

---

## Key Conventions

### Naming Conventions
- **Components**: PascalCase (e.g., `ArticleCard.tsx`)
- **Utilities**: camelCase (e.g., `markdown.ts`, `client-search.ts`)
- **Pages**: lowercase with `page.tsx` (Next.js convention)
- **Routes**: Dynamic routes use `[param]` syntax

### Import Paths
- Use `@/` alias for project root imports
- Example: `import { getAllArticles } from '@/lib/markdown'`

### File Organization
- **Pages**: Organized by route in `app/` directory
- **Components**: Reusable components in `components/`
- **Utilities**: Business logic in `lib/`
- **Content**: Source files in `content/`
- **Scripts**: Build utilities in `scripts/`

---

## Development Workflow

1. **Add Content**: Create `.md` files in `content/`
2. **Generate Data**: Run `npm run generate-articles-json`
3. **Index Search**: Run `npm run init-search` (if using Meilisearch)
4. **Develop**: Run `npm run dev`
5. **Build**: Run `npm run build` (generates `out/` directory)
6. **Deploy**: Upload `out/` directory to static hosting

---

## Notes

- The `out/` directory is generated and should be in `.gitignore`
- The `node_modules/` directory should not be committed
- All pages use Static Site Generation (SSG) for optimal performance
- Client-side search works without a server (uses `articles.json`)
- Server-side search requires Meilisearch to be running

